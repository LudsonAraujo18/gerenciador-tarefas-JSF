<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/templates/template.xhtml">

    <ui:define name="title">Gerenciador de Tarefas</ui:define>

    <ui:define name="content">
        <h:form>
            <h2>Cadastro de Tarefa</h2>

            <h:panelGrid columns="2" cellpadding="5">

                <h:outputLabel for="titulo" value="Título:" />
                <h:inputText id="titulo" value="#{tarefaBean.tarefa.titulo}" required="true" />

                <h:outputLabel for="descricao" value="Descrição:" />
                <h:inputTextarea id="descricao" value="#{tarefaBean.tarefa.descricao}" rows="3" />

                <h:outputLabel for="prioridade" value="Prioridade:" />
                <h:selectOneMenu id="prioridade" value="#{tarefaBean.tarefa.prioridade}">
                    <f:selectItems value="#{tarefaBean.prioridades}" />
                </h:selectOneMenu>

                <h:outputLabel for="status" value="Status:" />
                <h:selectOneMenu id="status" value="#{tarefaBean.tarefa.status}">
                    <f:selectItems value="#{tarefaBean.statusDisponiveis}" />
                </h:selectOneMenu>

            </h:panelGrid>

            <br/>
            <h:commandButton value="Salvar" action="#{tarefaBean.salvar}" style="margin-right:10px;" />
            <h:messages globalOnly="true" style="color: red;" />

            <hr/>

            <h2>Lista de Tarefas</h2>
            <h:panelGrid columns="5" border="1" cellpadding="5" style="border-collapse: collapse;">
                <f:facet name="header">
                    <h:outputText value="Título" />
                    <h:outputText value="Descrição" />
                    <h:outputText value="Prioridade" />
                    <h:outputText value="Status" />
                    <h:outputText value="Ações" />
                </f:facet>

                <ui:repeat value="#{tarefaBean.tarefas}" var="t">
                    <h:outputText value="#{t.titulo}" />
                    <h:outputText value="#{t.descricao}" />
                    <h:outputText value="#{t.prioridade}" />
                    <h:outputText value="#{t.status}" />

                    <h:panelGroup>
                        <h:commandButton value="Concluir" action="#{tarefaBean.concluirTarefa(t)}" rendered="#{t.status ne 'Concluída'}" />
                        <h:commandButton value="Excluir" action="#{tarefaBean.remover(t)}" style="margin-left:5px;" />
                    </h:panelGroup>
                </ui:repeat>
            </h:panelGrid>
        </h:form>
    </ui:define>
</ui:composition>
